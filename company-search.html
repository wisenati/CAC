<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CAC Nigeria - Company Search & Verification</title>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      rel="stylesheet"
    />
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-database-compat.js"></script>
    <style>
      :root {
        --primary-green: #1e5f3e;
        --secondary-green: #2d7a52;
        --accent-gold: #d4af37;
        --light-gold: #f4e8a0;
        --white: #ffffff;
        --gray-100: #f8f9fa;
        --gray-200: #e9ecef;
        --gray-300: #dee2e6;
        --gray-800: #343a40;
        --success-green: #28a745;
        --warning-orange: #fd7e14;
        --danger-red: #dc3545;
        --info-blue: #17a2b8;
        --shadow-light: 0 2px 10px rgba(0, 0, 0, 0.1);
        --shadow-medium: 0 4px 25px rgba(0, 0, 0, 0.15);
        --shadow-heavy: 0 8px 40px rgba(0, 0, 0, 0.2);
        --gradient-primary: linear-gradient(135deg, #1e5f3e 0%, #2d7a52 100%);
        --gradient-accent: linear-gradient(135deg, #d4af37 0%, #f4e8a0 100%);
        --gradient-card: linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%);
        --gradient-success: linear-gradient(135deg, #28a745 0%, #20c997 100%);
        --gradient-warning: linear-gradient(135deg, #fd7e14 0%, #ffc107 100%);
        --gradient-danger: linear-gradient(135deg, #dc3545 0%, #e74c3c 100%);
        --gradient-info: linear-gradient(135deg, #17a2b8 0%, #20c997 100%);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        line-height: 1.6;
        color: var(--gray-800);
        background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        min-height: 100vh;
        overflow-x: hidden;
      }

      /* App-like Header */
      .app-header {
        position: fixed;
        top: 0;
        width: 100%;
        background: rgba(255, 255, 255, 0.98);
        backdrop-filter: blur(20px);
        z-index: 1000;
        padding: 1rem 0;
        box-shadow: var(--shadow-light);
        border-bottom: 1px solid var(--gray-200);
      }

      .header-content {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .logo-section {
        display: flex;
        align-items: center;
        gap: 15px;
      }

      .logo-section img {
        height: 45px;
        width: auto;
        filter: drop-shadow(2px 2px 4px rgba(0, 0, 0, 0.1));
      }

      .logo-text {
        font-size: 1.4rem;
        font-weight: 700;
        color: var(--primary-green);
      }

      .header-actions {
        display: flex;
        align-items: center;
        gap: 15px;
      }

      .notification-btn,
      .profile-btn {
        width: 45px;
        height: 45px;
        border-radius: 50%;
        border: none;
        background: var(--gradient-accent);
        color: var(--primary-green);
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.1rem;
        transition: all 0.3s ease;
        box-shadow: var(--shadow-light);
      }

      .notification-btn:hover,
      .profile-btn:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-medium);
      }

      /* Main Content */
      .main-content {
        max-width: 1200px;
        margin: 100px auto 40px;
        padding: 0 20px;
      }

      .page-header {
        text-align: center;
        margin-bottom: 3rem;
        animation: fadeInDown 0.8s ease-out;
      }

      .page-title {
        font-size: 2.5rem;
        font-weight: 700;
        color: var(--primary-green);
        margin-bottom: 0.5rem;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
      }

      .page-subtitle {
        font-size: 1.2rem;
        color: var(--gray-800);
        opacity: 0.8;
        max-width: 700px;
        margin: 0 auto;
      }

      /* Search Section */
      .search-section {
        background: var(--gradient-card);
        border-radius: 25px;
        padding: 3rem;
        box-shadow: var(--shadow-medium);
        margin-bottom: 2rem;
        border: 1px solid var(--gray-200);
        position: relative;
        overflow: hidden;
        animation: fadeInUp 0.8s ease-out;
      }

      .search-section::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 5px;
        background: var(--gradient-accent);
      }

      .search-title {
        font-size: 1.8rem;
        font-weight: 700;
        color: var(--primary-green);
        margin-bottom: 1rem;
        text-align: center;
      }

      .search-description {
        text-align: center;
        color: var(--gray-800);
        opacity: 0.8;
        margin-bottom: 2rem;
        font-size: 1.1rem;
      }

      /* Search Filters */
      .search-filters {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 1.5rem;
        margin-bottom: 2rem;
      }

      .filter-group {
        display: flex;
        flex-direction: column;
      }

      .filter-label {
        font-weight: 600;
        color: var(--gray-800);
        margin-bottom: 0.5rem;
        font-size: 0.95rem;
      }

      .filter-input,
      .filter-select {
        padding: 12px 15px;
        border: 2px solid var(--gray-200);
        border-radius: 10px;
        font-size: 1rem;
        background: var(--white);
        color: var(--gray-800);
        transition: all 0.3s ease;
      }

      .filter-input:focus,
      .filter-select:focus {
        outline: none;
        border-color: var(--primary-green);
        box-shadow: 0 0 0 3px rgba(30, 95, 62, 0.1);
      }

      /* Search Button */
      .search-container {
        text-align: center;
        margin-bottom: 2rem;
      }

      .search-btn {
        background: var(--gradient-primary);
        color: var(--white);
        border: none;
        padding: 15px 40px;
        border-radius: 25px;
        font-size: 1.1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        display: inline-flex;
        align-items: center;
        gap: 10px;
        box-shadow: var(--shadow-light);
      }

      .search-btn:hover {
        background: var(--secondary-green);
        transform: translateY(-2px);
        box-shadow: var(--shadow-medium);
      }

      .search-btn:disabled {
        background: var(--gray-300);
        cursor: not-allowed;
        transform: none;
      }

      /* Advanced Search Toggle */
      .advanced-search-toggle {
        text-align: center;
        margin-bottom: 1rem;
      }

      .toggle-btn {
        background: none;
        border: none;
        color: var(--primary-green);
        font-weight: 600;
        cursor: pointer;
        padding: 0.5rem 1rem;
        border-radius: 15px;
        transition: all 0.3s ease;
      }

      .toggle-btn:hover {
        background: var(--gray-100);
      }

      .advanced-filters {
        display: none;
        animation: slideDown 0.3s ease-out;
      }

      .advanced-filters.show {
        display: block;
      }

      /* Search Results */
      .search-results {
        margin-top: 2rem;
        display: none;
        animation: fadeInUp 0.6s ease-out;
      }

      .results-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1.5rem;
        padding: 1rem;
        background: var(--gray-100);
        border-radius: 10px;
      }

      .results-count {
        font-weight: 600;
        color: var(--primary-green);
      }

      .results-sort {
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .sort-select {
        padding: 8px 12px;
        border: 1px solid var(--gray-300);
        border-radius: 8px;
        background: var(--white);
      }

      /* Company Cards */
      .company-card {
        background: var(--white);
        border-radius: 20px;
        padding: 2rem;
        box-shadow: var(--shadow-light);
        border: 1px solid var(--gray-200);
        margin-bottom: 1.5rem;
        position: relative;
        overflow: hidden;
        transition: all 0.3s ease;
      }

      .company-card:hover {
        transform: translateY(-3px);
        box-shadow: var(--shadow-medium);
      }

      .company-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 1.5rem;
      }

      .company-name {
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--primary-green);
        margin-bottom: 0.5rem;
      }

      .company-rc {
        font-size: 1rem;
        color: var(--gray-800);
        opacity: 0.8;
        font-weight: 600;
      }

      .company-status {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 8px 16px;
        border-radius: 25px;
        font-weight: 600;
        font-size: 0.9rem;
      }

      .status-active {
        background: var(--gradient-success);
        color: var(--white);
      }

      .status-pending {
        background: var(--gradient-warning);
        color: var(--white);
      }

      .status-inactive {
        background: var(--gradient-danger);
        color: var(--white);
      }

      .status-suspended {
        background: var(--gradient-warning);
        color: var(--white);
      }

      .status-dissolved {
        background: var(--gray-300);
        color: var(--gray-800);
      }

      .verification-badge {
        position: absolute;
        top: 20px;
        right: 20px;
        background: var(--gradient-info);
        color: var(--white);
        padding: 8px 12px;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 5px;
        animation: pulse 2s infinite;
      }

      /* Company Details */
      .company-details {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 1rem;
        margin-bottom: 1.5rem;
      }

      .detail-item {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 0.95rem;
      }

      .detail-icon {
        color: var(--primary-green);
        width: 16px;
      }

      .detail-label {
        font-weight: 600;
        min-width: 100px;
      }

      .detail-value {
        color: var(--gray-800);
      }

      /* Company Description */
      .company-description {
        background: var(--gray-100);
        border-radius: 10px;
        padding: 1rem;
        margin-bottom: 1.5rem;
        border-left: 4px solid var(--primary-green);
      }

      .description-title {
        font-weight: 600;
        color: var(--primary-green);
        margin-bottom: 0.5rem;
      }

      /* Directors Section */
      .directors-section {
        background: var(--gray-100);
        border-radius: 10px;
        padding: 1rem;
        margin-bottom: 1.5rem;
      }

      .directors-title {
        font-weight: 600;
        color: var(--primary-green);
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .director-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0.5rem 0;
        border-bottom: 1px solid var(--gray-200);
      }

      .director-item:last-child {
        border-bottom: none;
      }

      .director-name {
        font-weight: 600;
      }

      .director-position {
        color: var(--gray-800);
        opacity: 0.8;
        font-size: 0.9rem;
      }

      /* Action Buttons */
      .company-actions {
        display: flex;
        gap: 1rem;
        flex-wrap: wrap;
      }

      .btn {
        padding: 12px 24px;
        border-radius: 25px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        border: none;
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 0.95rem;
        text-decoration: none;
        position: relative;
        overflow: hidden;
      }

      .btn::before {
        content: "";
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        background: rgba(255, 255, 255, 0.3);
        border-radius: 50%;
        transform: translate(-50%, -50%);
        transition: all 0.3s ease;
      }

      .btn:hover::before {
        width: 300px;
        height: 300px;
      }

      .btn-primary {
        background: var(--gradient-primary);
        color: var(--white);
      }

      .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-medium);
      }

      .btn-accent {
        background: var(--gradient-accent);
        color: var(--primary-green);
      }

      .btn-accent:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-medium);
      }

      .btn-info {
        background: var(--gradient-info);
        color: var(--white);
      }

      .btn-info:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-medium);
      }

      .btn-secondary {
        background: var(--gray-200);
        color: var(--gray-800);
      }

      .btn-secondary:hover {
        background: var(--gray-300);
      }

      /* Service Modal */
      .service-modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.6);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 2000;
        backdrop-filter: blur(5px);
      }

      .service-modal-content {
        background: var(--white);
        border-radius: 20px;
        padding: 2.5rem;
        max-width: 600px;
        width: 90%;
        max-height: 80vh;
        overflow-y: auto;
        position: relative;
        box-shadow: var(--shadow-heavy);
        animation: modalSlideIn 0.3s ease-out;
      }

      @keyframes modalSlideIn {
        from {
          opacity: 0;
          transform: translateY(-50px) scale(0.9);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }

      .modal-close {
        position: absolute;
        top: 1rem;
        right: 1rem;
        background: var(--gray-200);
        border: none;
        width: 35px;
        height: 35px;
        border-radius: 50%;
        font-size: 1.2rem;
        cursor: pointer;
        color: var(--gray-800);
        transition: all 0.3s ease;
      }

      .modal-close:hover {
        background: var(--danger-red);
        color: var(--white);
      }

      .modal-title {
        font-size: 1.6rem;
        font-weight: 700;
        color: var(--primary-green);
        margin-bottom: 1.5rem;
        text-align: center;
      }

      /* Service Options */
      .service-options {
        display: grid;
        gap: 1rem;
        margin-bottom: 2rem;
      }

      .service-option {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1rem;
        border: 2px solid var(--gray-200);
        border-radius: 10px;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .service-option:hover {
        border-color: var(--primary-green);
        background: var(--gray-100);
      }

      .service-option.selected {
        border-color: var(--primary-green);
        background: rgba(30, 95, 62, 0.1);
      }

      .service-name {
        font-weight: 600;
        color: var(--gray-800);
      }

      .service-fee {
        font-weight: 700;
        color: var(--primary-green);
      }

      /* Payment Section */
      .payment-section {
        background: var(--gray-100);
        border-radius: 15px;
        padding: 1.5rem;
        margin-bottom: 1.5rem;
        border: 1px solid var(--gray-200);
      }

      .payment-item {
        display: flex;
        justify-content: space-between;
        margin-bottom: 0.8rem;
        font-size: 1rem;
      }

      .payment-total {
        border-top: 2px solid var(--primary-green);
        padding-top: 0.8rem;
        font-weight: 700;
        font-size: 1.2rem;
        color: var(--primary-green);
      }

      /* Status Messages */
      .status-message {
        padding: 1rem 1.5rem;
        border-radius: 10px;
        margin-bottom: 1.5rem;
        display: flex;
        align-items: center;
        gap: 10px;
        font-weight: 600;
      }

      .status-success {
        background: var(--gradient-success);
        color: var(--white);
      }

      .status-warning {
        background: var(--gradient-warning);
        color: var(--white);
      }

      .status-info {
        background: var(--gradient-info);
        color: var(--white);
      }

      /* Loading Animation */
      .loading {
        display: inline-block;
        width: 20px;
        height: 20px;
        border: 3px solid rgba(255, 255, 255, 0.3);
        border-radius: 50%;
        border-top-color: var(--white);
        animation: spin 1s ease-in-out infinite;
      }

      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      @keyframes pulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
        100% {
          transform: scale(1);
        }
      }

      @keyframes fadeInDown {
        from {
          opacity: 0;
          transform: translateY(-30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes slideDown {
        from {
          opacity: 0;
          max-height: 0;
        }
        to {
          opacity: 1;
          max-height: 500px;
        }
      }

      /* Footer */
      .app-footer {
        background: var(--primary-green);
        color: var(--white);
        padding: 2rem 0;
        text-align: center;
        margin-top: 3rem;
      }

      .footer-content {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
      }

      /* Responsive Design */
      @media (max-width: 768px) {
        .header-content {
          padding: 0 15px;
        }

        .logo-text {
          font-size: 1.2rem;
        }

        .main-content {
          margin-top: 80px;
          padding: 0 15px;
        }

        .page-title {
          font-size: 2rem;
        }

        .search-section {
          padding: 2rem 1.5rem;
        }

        .search-filters {
          grid-template-columns: 1fr;
        }

        .company-header {
          flex-direction: column;
          align-items: flex-start;
          gap: 1rem;
        }

        .company-details {
          grid-template-columns: 1fr;
        }

        .company-actions {
          flex-direction: column;
        }

        .btn {
          width: 100%;
          justify-content: center;
        }

        .service-modal-content {
          margin: 1rem;
          width: calc(100% - 2rem);
          padding: 2rem 1.5rem;
        }

        .results-header {
          flex-direction: column;
          gap: 1rem;
          align-items: flex-start;
        }
      }

      @media (max-width: 480px) {
        .page-title {
          font-size: 1.8rem;
        }

        .search-title {
          font-size: 1.5rem;
        }

        .company-card {
          padding: 1.5rem;
        }

        .detail-item {
          flex-direction: column;
          align-items: flex-start;
          gap: 0.3rem;
        }

        .detail-label {
          min-width: 100%;
        }
      }
    </style>
  </head>
  <body>
    <!-- App Header -->
    <header class="app-header">
      <div class="header-content">
        <div class="logo-section">
          <img
            src="https://th.bing.com/th/id/OIP.BYD329vkS6TICObJPDFTPAHaHa?rs=1&pid=ImgDetMain"
            alt="CAC Logo"
          />
          <span class="logo-text">CAC Nigeria</span>
        </div>
        <div class="header-actions">
          <button class="notification-btn" onclick="showNotifications()">
            <i class="fas fa-bell"></i>
            <span class="notification-badge">3</span>
          </button>
          <button class="profile-btn" onclick="showProfile()">
            <i class="fas fa-user"></i>
          </button>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
      <div class="page-header">
        <h1 class="page-title">Company Search & Verification</h1>
        <p class="page-subtitle">
          Search for registered companies in Nigeria, verify their status, and
          access official documents and certificates
        </p>
      </div>

      <!-- Search Section -->
      <div class="search-section">
        <h2 class="search-title">Search Registered Companies</h2>
        <p class="search-description">
          Find detailed information about any registered company in Nigeria
          using various search criteria
        </p>

        <!-- Basic Search Filters -->
        <div class="search-filters">
          <div class="filter-group">
            <label class="filter-label">Company Name</label>
            <input
              type="text"
              id="companyName"
              class="filter-input"
              placeholder="Enter company name..."
            />
          </div>
          <div class="filter-group">
            <label class="filter-label">RC Number</label>
            <input
              type="text"
              id="rcNumber"
              class="filter-input"
              placeholder="Enter RC number..."
            />
          </div>
          <div class="filter-group">
            <label class="filter-label">Company Type</label>
            <select id="companyType" class="filter-select">
              <option value="">All Types</option>
              <option value="business-name">Business Name</option>
              <option value="llc">Limited Liability Company</option>
              <option value="inc">Incorporation</option>
              <option value="private">Private Limited Company</option>
              <option value="public">Public Limited Company</option>
              <option value="unlimited">Unlimited Company</option>
              <option value="guarantee">Company Limited by Guarantee</option>
              <option value="foreign">Foreign Company</option>
            </select>
          </div>
          <div class="filter-group">
            <label class="filter-label">Status</label>
            <select id="companyStatus" class="filter-select">
              <option value="">All Status</option>
              <option value="active">Active</option>
              <option value="pending">Pending</option>
              <option value="approved">Approved</option>
              <option value="inactive">Inactive</option>
              <option value="suspended">Suspended</option>
              <option value="dissolved">Dissolved</option>
            </select>
          </div>
        </div>

        <!-- Advanced Search Toggle -->
        <div class="advanced-search-toggle">
          <button class="toggle-btn" onclick="toggleAdvancedSearch()">
            <i class="fas fa-cog"></i> Advanced Search Options
          </button>
        </div>

        <!-- Advanced Search Filters -->
        <div class="advanced-filters" id="advancedFilters">
          <div class="search-filters">
            <div class="filter-group">
              <label class="filter-label">State</label>
              <select id="companyState" class="filter-select">
                <option value="">All States</option>
                <option value="lagos">Lagos</option>
                <option value="abuja">FCT Abuja</option>
                <option value="kano">Kano</option>
                <option value="rivers">Rivers</option>
                <option value="ogun">Ogun</option>
                <option value="kaduna">Kaduna</option>
                <option value="oyo">Oyo</option>
                <option value="delta">Delta</option>
                <option value="edo">Edo</option>
                <option value="anambra">Anambra</option>
              </select>
            </div>
            <div class="filter-group">
              <label class="filter-label">Registration Date From</label>
              <input type="date" id="dateFrom" class="filter-input" />
            </div>
            <div class="filter-group">
              <label class="filter-label">Registration Date To</label>
              <input type="date" id="dateTo" class="filter-input" />
            </div>
            <div class="filter-group">
              <label class="filter-label">Share Capital Range</label>
              <select id="shareCapital" class="filter-select">
                <option value="">Any Amount</option>
                <option value="0-100000">₦0 - ₦100,000</option>
                <option value="100000-1000000">₦100,000 - ₦1,000,000</option>
                <option value="1000000-10000000">
                  ₦1,000,000 - ₦10,000,000
                </option>
                <option value="10000000+">Above ₦10,000,000</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Search Button -->
        <div class="search-container">
          <button class="search-btn" id="searchBtn" onclick="searchCompanies()">
            <i class="fas fa-search"></i>
            <span>Search Companies</span>
          </button>
        </div>
      </div>

      <!-- Search Results -->
      <div class="search-results" id="searchResults">
        <div class="results-header">
          <div class="results-count" id="resultsCount">Found 0 companies</div>
          <div class="results-sort">
            <label for="sortBy">Sort by:</label>
            <select id="sortBy" class="sort-select" onchange="sortResults()">
              <option value="name">Company Name</option>
              <option value="date">Registration Date</option>
              <option value="status">Status</option>
              <option value="capital">Share Capital</option>
            </select>
          </div>
        </div>

        <div id="companiesContainer">
          <!-- Company results will be populated here -->
        </div>
      </div>
    </main>

    <!-- Service Modal -->
    <div class="service-modal" id="serviceModal">
      <div class="service-modal-content">
        <button class="modal-close" onclick="closeServiceModal()">
          <i class="fas fa-times"></i>
        </button>

        <h3 class="modal-title" id="serviceModalTitle">Company Services</h3>

        <div class="service-options" id="serviceOptions">
          <!-- Service options will be populated here -->
        </div>

        <div class="payment-section" id="paymentSection" style="display: none">
          <h4 style="margin-bottom: 1rem; color: var(--primary-green)">
            Payment Details
          </h4>
          <div class="payment-item">
            <span>Service:</span>
            <span id="selectedService">-</span>
          </div>
          <div class="payment-item">
            <span>Service Fee:</span>
            <span id="serviceFee">-</span>
          </div>
          <div class="payment-item">
            <span>Processing Fee:</span>
            <span>₦500</span>
          </div>
          <div class="payment-item payment-total">
            <span>Total Amount:</span>
            <span id="totalAmount">-</span>
          </div>
        </div>

        <div style="display: flex; gap: 1rem; margin-top: 2rem">
          <button class="btn btn-secondary" onclick="closeServiceModal()">
            <i class="fas fa-times"></i> Cancel
          </button>
          <button
            class="btn btn-primary"
            id="proceedBtn"
            onclick="proceedWithService()"
            style="display: none"
          >
            <i class="fas fa-credit-card"></i> Proceed to Payment
          </button>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <footer class="app-footer">
      <div class="footer-content">
        <p>
          &copy; 2025 Corporate Affairs Commission Nigeria. All rights reserved.
        </p>
      </div>
    </footer>

    <script>
      // Firebase configuration
      const firebaseConfig = {
        apiKey: "AIzaSyDJP2XIR51qGTLINiKvEoscYTMt11CaZ5s",
        authDomain: "paytrust-71e30.firebaseapp.com",
        databaseURL: "https://paytrust-71e30-default-rtdb.firebaseio.com/",
        projectId: "paytrust-71e30",
        storageBucket: "paytrust-71e30.appspot.com",
        messagingSenderId: "492609516838",
        appId: "1:492609516838:android:5a924ad3b7e8e508fa3de7",
      };

      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);
      const database = firebase.database();
      const registrationsRef = database.ref("registrations");
      const companyServicesRef = database.ref("companyServices");

      // Current search results and selected service
      let currentSearchResults = [];
      let allCompanies = [];
      let selectedCompany = null;
      let selectedServiceData = null;

      // Sample companies database (existing companies)
      const sampleCompanies = [
        {
          name: "Dangote Cement Plc",
          rcNumber: "RC1234567",
          type: "public",
          status: "active",
          registrationDate: "2010-03-15",
          state: "lagos",
          shareCapital: 50000000000,
          registeredAddress: "1 Alfred Rewane Road, Ikoyi, Lagos",
          businessActivity:
            "Manufacturing and marketing of cement and related products",
          directors: [
            { name: "Aliko Dangote", position: "Chairman" },
            { name: "Michel Puchercos", position: "Group Managing Director" },
            { name: "Devakumar Edwin", position: "Executive Director" },
          ],
          verified: true,
          source: "sample",
        },
        {
          name: "MTN Nigeria Communications Plc",
          rcNumber: "RC2345678",
          type: "public",
          status: "active",
          registrationDate: "2001-08-20",
          state: "lagos",
          shareCapital: 20000000000,
          registeredAddress:
            "Churchgate Tower 2, 30 Afribank Street, Victoria Island, Lagos",
          businessActivity: "Provision of telecommunications services",
          directors: [
            { name: "Ernest Ndukwe", position: "Chairman" },
            { name: "Karl Toriola", position: "Chief Executive Officer" },
            { name: "Modupe Kadri", position: "Chief Financial Officer" },
          ],
          verified: true,
          source: "sample",
        },
        {
          name: "Guaranty Trust Bank Plc",
          rcNumber: "RC3456789",
          type: "public",
          status: "active",
          registrationDate: "1990-07-20",
          state: "lagos",
          shareCapital: 30000000000,
          registeredAddress: "635 Akin Adesola Street, Victoria Island, Lagos",
          businessActivity: "Commercial banking and financial services",
          directors: [
            { name: "Gbenga Oyebode", position: "Chairman" },
            { name: "Segun Agbaje", position: "Managing Director" },
            { name: "Chibuzor Onyema", position: "Executive Director" },
          ],
          verified: true,
          source: "sample",
        },
        {
          name: "Shoprite Holdings Nigeria Ltd",
          rcNumber: "RC4567890",
          type: "private",
          status: "active",
          registrationDate: "2005-12-10",
          state: "lagos",
          shareCapital: 5000000000,
          registeredAddress:
            "Ikeja City Mall, Obafemi Awolowo Way, Ikeja, Lagos",
          businessActivity: "Retail and wholesale trading",
          directors: [
            { name: "Pieter Engelbrecht", position: "Managing Director" },
            { name: "Folakemi Fadahunsi", position: "Operations Director" },
          ],
          verified: true,
          source: "sample",
        },
        {
          name: "Innoson Vehicle Manufacturing Ltd",
          rcNumber: "RC5678901",
          type: "private",
          status: "active",
          registrationDate: "2007-05-18",
          state: "anambra",
          shareCapital: 2000000000,
          registeredAddress: "Nnewi Industrial Layout, Anambra State",
          businessActivity: "Vehicle manufacturing and assembly",
          directors: [
            { name: "Innocent Chukwuma", position: "Chairman/CEO" },
            { name: "Cornel Osigwe", position: "Executive Director" },
          ],
          verified: true,
          source: "sample",
        },
      ];

      // Company services with fees
      const companyServices = [
        {
          name: "Certified True Copy of Certificate of Incorporation",
          fee: 10000,
        },
        { name: "Certified True Copy of Memorandum and Articles", fee: 3000 },
        { name: "Company Status Report", fee: 2000 },
        { name: "Directors and Shareholders Information", fee: 5000 },
        { name: "Company Search Report", fee: 1000 },
        { name: "Annual Return Filing Status", fee: 1500 },
        { name: "Company Compliance Certificate", fee: 7500 },
      ];

      // Initialize page
      document.addEventListener("DOMContentLoaded", function () {
        // Check if user is logged in
        const userData = JSON.parse(localStorage.getItem("cacUser"));
        if (!userData) {
          showStatusMessage(
            "Please log in to access company search services",
            "warning"
          );
          setTimeout(() => {
            window.location.href = "registration.html";
          }, 3000);
          return;
        }

        // Load all companies (sample + registered)
        loadAllCompanies();

        // Add event listeners for real-time search
        const searchInputs = ["companyName", "rcNumber"];
        searchInputs.forEach((inputId) => {
          document
            .getElementById(inputId)
            .addEventListener("input", function () {
              if (this.value.length > 2) {
                performQuickSearch();
              }
            });
        });
      });

      // Load all companies from Firebase and combine with sample data
      function loadAllCompanies() {
        showStatusMessage("Loading company database...", "info");

        // Start with sample companies
        allCompanies = [...sampleCompanies];

        // Fetch registered companies from Firebase
        registrationsRef
          .once("value")
          .then((snapshot) => {
            const registrations = snapshot.val();

            if (registrations) {
              Object.keys(registrations).forEach((key) => {
                const registration = registrations[key];

                // Convert registration data to company format
                const company = convertRegistrationToCompany(registration);
                allCompanies.push(company);
              });
            }

            showStatusMessage(
              `Loaded ${allCompanies.length} companies from database`,
              "success"
            );

            // Auto-hide status message after 3 seconds
            setTimeout(() => {
              const statusMessages =
                document.querySelectorAll(".status-message");
              statusMessages.forEach((msg) => msg.remove());
            }, 3000);
          })
          .catch((error) => {
            console.error("Error loading companies:", error);
            showStatusMessage(
              "Error loading company database. Using sample data only.",
              "warning"
            );
          });
      }

      // Convert registration data to company format
      function convertRegistrationToCompany(registration) {
        // Extract state from address if available
        const extractState = (address) => {
          if (!address) return "unknown";
          const lowerAddress = address.toLowerCase();
          const states = [
            "lagos",
            "abuja",
            "kano",
            "rivers",
            "ogun",
            "kaduna",
            "oyo",
            "delta",
            "edo",
            "anambra",
          ];
          for (let state of states) {
            if (lowerAddress.includes(state)) {
              return state;
            }
          }
          return "unknown";
        };

        // Determine share capital based on business type
        const getShareCapital = (type, amount) => {
          if (type === "business-name") return amount || 15000;
          if (type === "llc") return amount || 30000;
          if (type === "inc") return amount || 50000;
          return amount || 10000;
        };

        // Create directors array from owner info
        const directors = [];
        if (registration.ownerName) {
          directors.push({
            name: registration.ownerName,
            position:
              registration.ownership === "partnership"
                ? "Partner"
                : "Proprietor",
          });
        }

        return {
          name:
            registration.name1 ||
            registration.businessName ||
            "Unknown Business",
          rcNumber: registration.rcNumber || "RC000000",
          type: registration.type || "business-name",
          status: registration.status || "pending",
          registrationDate: registration.timestamp
            ? new Date(registration.timestamp).toISOString().split("T")[0]
            : new Date().toISOString().split("T")[0],
          state: extractState(registration.address),
          shareCapital: getShareCapital(registration.type, registration.amount),
          registeredAddress: registration.address || "Address not provided",
          businessActivity:
            registration.description ||
            registration.activity ||
            "Business activity not specified",
          directors: directors,
          verified: registration.status === "approved",
          source: "registered",
          userId: registration.userId,
          reference: registration.reference,
          category: registration.category,
          ownership: registration.ownership,
        };
      }

      // Toggle advanced search
      function toggleAdvancedSearch() {
        const advancedFilters = document.getElementById("advancedFilters");
        const toggleBtn = document.querySelector(".toggle-btn");

        if (advancedFilters.classList.contains("show")) {
          advancedFilters.classList.remove("show");
          toggleBtn.innerHTML =
            '<i class="fas fa-cog"></i> Advanced Search Options';
        } else {
          advancedFilters.classList.add("show");
          toggleBtn.innerHTML =
            '<i class="fas fa-cog"></i> Hide Advanced Options';
        }
      }

      // Perform quick search (real-time)
      function performQuickSearch() {
        const companyName = document
          .getElementById("companyName")
          .value.toLowerCase();
        const rcNumber = document
          .getElementById("rcNumber")
          .value.toLowerCase();

        if (!companyName && !rcNumber) return;

        const quickResults = allCompanies
          .filter(
            (company) =>
              company.name.toLowerCase().includes(companyName) ||
              company.rcNumber.toLowerCase().includes(rcNumber)
          )
          .slice(0, 3);

        if (quickResults.length > 0) {
          showStatusMessage(
            `Found ${quickResults.length} quick matches. Click search for detailed results.`,
            "info"
          );
        }
      }

      // Main search function
      function searchCompanies() {
        // Show loading state
        const searchBtn = document.getElementById("searchBtn");
        const originalContent = searchBtn.innerHTML;
        searchBtn.innerHTML =
          '<div class="loading"></div><span>Searching...</span>';
        searchBtn.disabled = true;

        // Get search criteria
        const criteria = {
          companyName: document
            .getElementById("companyName")
            .value.toLowerCase(),
          rcNumber: document.getElementById("rcNumber").value.toLowerCase(),
          companyType: document.getElementById("companyType").value,
          companyStatus: document.getElementById("companyStatus").value,
          companyState: document.getElementById("companyState").value,
          dateFrom: document.getElementById("dateFrom").value,
          dateTo: document.getElementById("dateTo").value,
          shareCapital: document.getElementById("shareCapital").value,
        };

        // Simulate search delay
        setTimeout(() => {
          performSearch(criteria);

          // Reset button
          searchBtn.innerHTML = originalContent;
          searchBtn.disabled = false;
        }, 1500);
      }

      // Perform the actual search
      function performSearch(criteria) {
        let results = allCompanies.filter((company) => {
          // Company name filter
          if (
            criteria.companyName &&
            !company.name.toLowerCase().includes(criteria.companyName)
          ) {
            return false;
          }

          // RC number filter
          if (
            criteria.rcNumber &&
            !company.rcNumber.toLowerCase().includes(criteria.rcNumber)
          ) {
            return false;
          }

          // Company type filter
          if (criteria.companyType && company.type !== criteria.companyType) {
            return false;
          }

          // Status filter
          if (
            criteria.companyStatus &&
            company.status !== criteria.companyStatus
          ) {
            return false;
          }

          // State filter
          if (
            criteria.companyState &&
            company.state !== criteria.companyState
          ) {
            return false;
          }

          // Date range filter
          if (
            criteria.dateFrom &&
            new Date(company.registrationDate) < new Date(criteria.dateFrom)
          ) {
            return false;
          }

          if (
            criteria.dateTo &&
            new Date(company.registrationDate) > new Date(criteria.dateTo)
          ) {
            return false;
          }

          // Share capital filter
          if (criteria.shareCapital) {
            const [min, max] = criteria.shareCapital
              .split("-")
              .map((v) => (v.includes("+") ? Infinity : parseInt(v)));
            if (
              company.shareCapital < min ||
              (max && company.shareCapital > max)
            ) {
              return false;
            }
          }

          return true;
        });

        currentSearchResults = results;
        displaySearchResults();
      }

      // Display search results
      function displaySearchResults() {
        const resultsContainer = document.getElementById("searchResults");
        const resultsCount = document.getElementById("resultsCount");
        const companiesContainer =
          document.getElementById("companiesContainer");

        resultsCount.textContent = `Found ${currentSearchResults.length} companies`;

        if (currentSearchResults.length === 0) {
          companiesContainer.innerHTML = `
            <div class="company-card">
              <div class="company-header">
                <div>
                  <div class="company-name">No Companies Found</div>
                  <p>No companies found matching your search criteria. Try adjusting your filters.</p>
                </div>
              </div>
            </div>
          `;
        } else {
          companiesContainer.innerHTML = currentSearchResults
            .map((company, index) => createCompanyCard(company, index))
            .join("");
        }

        resultsContainer.style.display = "block";
      }

      // Create individual company card
      function createCompanyCard(company, index) {
        const statusClass = getStatusClass(company.status);
        const statusIcon = getStatusIcon(company.status);
        const statusText = getStatusText(company.status);

        // Show source badge for newly registered companies
        const sourceBadge =
          company.source === "registered"
            ? '<div class="verification-badge" style="background: var(--gradient-warning);"><i class="fas fa-star"></i> Recently Registered</div>'
            : company.verified
            ? '<div class="verification-badge"><i class="fas fa-shield-check"></i> CAC Verified</div>'
            : "";

        return `
          <div class="company-card">
            ${sourceBadge}
            
            <div class="company-header">
              <div>
                <div class="company-name">${company.name}</div>
                <div class="company-rc">RC Number: ${company.rcNumber}</div>
                ${
                  company.reference
                    ? `<div class="company-rc">Reference: ${company.reference}</div>`
                    : ""
                }
              </div>
              <div class="company-status ${statusClass}">
                <i class="${statusIcon}"></i>
                <span>${statusText}</span>
              </div>
            </div>

            <div class="company-details">
              <div class="detail-item">
                <i class="fas fa-building detail-icon"></i>
                <span class="detail-label">Type:</span>
                <span class="detail-value">${getCompanyTypeText(
                  company.type
                )}</span>
              </div>
              <div class="detail-item">
                <i class="fas fa-calendar detail-icon"></i>
                <span class="detail-label">Registered:</span>
                <span class="detail-value">${new Date(
                  company.registrationDate
                ).toLocaleDateString()}</span>
              </div>
              <div class="detail-item">
                <i class="fas fa-map-marker-alt detail-icon"></i>
                <span class="detail-label">State:</span>
                <span class="detail-value">${
                  company.state.charAt(0).toUpperCase() + company.state.slice(1)
                }</span>
              </div>
              <div class="detail-item">
                <i class="fas fa-money-bill detail-icon"></i>
                <span class="detail-label">Share Capital:</span>
                <span class="detail-value">₦${company.shareCapital.toLocaleString()}</span>
              </div>
            </div>

            <div class="company-description">
              <div class="description-title">Business Activity</div>
              <p>${company.businessActivity}</p>
            </div>

            <div class="company-description">
              <div class="description-title">Registered Address</div>
              <p>${company.registeredAddress}</p>
            </div>

            ${
              company.directors && company.directors.length > 0
                ? `
            <div class="directors-section">
              <div class="directors-title">
                <i class="fas fa-users"></i>
                Directors & Key Personnel
              </div>
              ${company.directors
                .map(
                  (director) => `
                <div class="director-item">
                  <div>
                    <div class="director-name">${director.name}</div>
                    <div class="director-position">${director.position}</div>
                  </div>
                </div>
              `
                )
                .join("")}
            </div>
            `
                : ""
            }

            <div class="company-actions">
              <button class="btn btn-primary" onclick="openCompanyServices('${
                company.rcNumber
              }', '${company.name}')">
                <i class="fas fa-file-alt"></i> Get Documents
              </button>
              <button class="btn btn-info" onclick="viewFullDetails('${
                company.rcNumber
              }')">
                <i class="fas fa-eye"></i> Full Details
              </button>
              <button class="btn btn-accent" onclick="downloadReport('${
                company.rcNumber
              }')">
                <i class="fas fa-download"></i> Download Report
              </button>
              <button class="btn btn-secondary" onclick="shareCompany('${
                company.rcNumber
              }')">
                <i class="fas fa-share"></i> Share
              </button>
            </div>
          </div>
        `;
      }

      // Get status class for styling
      function getStatusClass(status) {
        switch (status) {
          case "active":
          case "approved":
            return "status-active";
          case "pending":
            return "status-pending";
          case "inactive":
            return "status-inactive";
          case "suspended":
            return "status-suspended";
          case "dissolved":
            return "status-dissolved";
          default:
            return "status-pending";
        }
      }

      // Get status icon
      function getStatusIcon(status) {
        switch (status) {
          case "active":
          case "approved":
            return "fas fa-check-circle";
          case "pending":
            return "fas fa-clock";
          case "inactive":
            return "fas fa-pause-circle";
          case "suspended":
            return "fas fa-exclamation-circle";
          case "dissolved":
            return "fas fa-times-circle";
          default:
            return "fas fa-clock";
        }
      }

      // Get status text
      function getStatusText(status) {
        switch (status) {
          case "active":
            return "Active";
          case "approved":
            return "Approved";
          case "pending":
            return "Pending";
          case "inactive":
            return "Inactive";
          case "suspended":
            return "Suspended";
          case "dissolved":
            return "Dissolved";
          default:
            return "Pending";
        }
      }

      // Get company type text
      function getCompanyTypeText(type) {
        switch (type) {
          case "business-name":
            return "Business Name Registration";
          case "llc":
            return "Limited Liability Company";
          case "inc":
            return "Incorporation";
          case "private":
            return "Private Limited Company";
          case "public":
            return "Public Limited Company";
          case "unlimited":
            return "Unlimited Company";
          case "guarantee":
            return "Company Limited by Guarantee";
          case "foreign":
            return "Foreign Company";
          default:
            return "Unknown";
        }
      }

      // Sort results
      function sortResults() {
        const sortBy = document.getElementById("sortBy").value;

        currentSearchResults.sort((a, b) => {
          switch (sortBy) {
            case "name":
              return a.name.localeCompare(b.name);
            case "date":
              return (
                new Date(b.registrationDate) - new Date(a.registrationDate)
              );
            case "status":
              return a.status.localeCompare(b.status);
            case "capital":
              return b.shareCapital - a.shareCapital;
            default:
              return 0;
          }
        });

        displaySearchResults();
      }

      // Open company services modal
      function openCompanyServices(rcNumber, companyName) {
        selectedCompany = { rcNumber, companyName };

        document.getElementById(
          "serviceModalTitle"
        ).textContent = `Services for ${companyName}`;

        const serviceOptions = document.getElementById("serviceOptions");
        serviceOptions.innerHTML = companyServices
          .map(
            (service, index) => `
          <div class="service-option" onclick="selectService(${index})">
            <div class="service-name">${service.name}</div>
            <div class="service-fee">₦${service.fee.toLocaleString()}</div>
          </div>
        `
          )
          .join("");

        document.getElementById("serviceModal").style.display = "flex";
      }

      // Select service
      function selectService(index) {
        // Remove previous selection
        document.querySelectorAll(".service-option").forEach((option) => {
          option.classList.remove("selected");
        });

        // Add selection to clicked option
        document
          .querySelectorAll(".service-option")
          [index].classList.add("selected");

        selectedServiceData = companyServices[index];

        // Update payment section
        document.getElementById("selectedService").textContent =
          selectedServiceData.name;
        document.getElementById(
          "serviceFee"
        ).textContent = `₦${selectedServiceData.fee.toLocaleString()}`;
        document.getElementById("totalAmount").textContent = `₦${(
          selectedServiceData.fee + 500
        ).toLocaleString()}`;

        // Show payment section and proceed button
        document.getElementById("paymentSection").style.display = "block";
        document.getElementById("proceedBtn").style.display = "flex";
      }

      // Proceed with service
      function proceedWithService() {
        if (!selectedServiceData) {
          showStatusMessage("Please select a service first", "warning");
          return;
        }

        // In a real app, this would redirect to payment page
        showStatusMessage(
          `Proceeding to payment for ${selectedServiceData.name} - ₦${(
            selectedServiceData.fee + 500
          ).toLocaleString()}`,
          "info"
        );

        // Save service request
        const serviceRequest = {
          companyRc: selectedCompany.rcNumber,
          companyName: selectedCompany.companyName,
          service: selectedServiceData.name,
          fee: selectedServiceData.fee,
          totalAmount: selectedServiceData.fee + 500,
          userId: JSON.parse(localStorage.getItem("cacUser"))?.email || "guest",
          requestDate: new Date().toISOString(),
          status: "pending_payment",
        };

        // Save to localStorage (in real app, save to Firebase)
        const userServiceRequests =
          JSON.parse(localStorage.getItem("userServiceRequests")) || [];
        userServiceRequests.push(serviceRequest);
        localStorage.setItem(
          "userServiceRequests",
          JSON.stringify(userServiceRequests)
        );

        closeServiceModal();

        // Simulate redirect to payment
        setTimeout(() => {
          showStatusMessage("Redirecting to payment page...", "info");
        }, 1000);
      }

      // Close service modal
      function closeServiceModal() {
        document.getElementById("serviceModal").style.display = "none";
        document.getElementById("paymentSection").style.display = "none";
        document.getElementById("proceedBtn").style.display = "none";
        selectedServiceData = null;
        selectedCompany = null;
      }

      // View full details
      function viewFullDetails(rcNumber) {
        const company = allCompanies.find((c) => c.rcNumber === rcNumber);
        if (company) {
          showStatusMessage(
            `Viewing full details for ${company.name}. This would open a detailed company profile page.`,
            "info"
          );
        }
      }

      // Download report
      function downloadReport(rcNumber) {
        const company = allCompanies.find((c) => c.rcNumber === rcNumber);
        if (company) {
          showStatusMessage(
            `Downloading company report for ${company.name}. Report generation in progress...`,
            "success"
          );

          // Simulate download
          setTimeout(() => {
            showStatusMessage(
              "Company report downloaded successfully!",
              "success"
            );
          }, 2000);
        }
      }

      // Share company
      function shareCompany(rcNumber) {
        const company = allCompanies.find((c) => c.rcNumber === rcNumber);
        if (company) {
          const shareText = `Check out ${company.name} (${rcNumber}) on CAC Nigeria Company Search`;

          if (navigator.share) {
            navigator.share({
              title: company.name,
              text: shareText,
              url: window.location.href,
            });
          } else {
            // Fallback - copy to clipboard
            navigator.clipboard.writeText(shareText).then(() => {
              showStatusMessage(
                "Company information copied to clipboard!",
                "success"
              );
            });
          }
        }
      }

      // Refresh company data from Firebase
      function refreshCompanyData() {
        showStatusMessage("Refreshing company database...", "info");
        loadAllCompanies();
      }

      // Show status message
      function showStatusMessage(message, type) {
        // Remove existing status messages
        const existingMessages = document.querySelectorAll(".status-message");
        existingMessages.forEach((msg) => msg.remove());

        // Create new status message
        const statusMessage = document.createElement("div");
        statusMessage.className = `status-message status-${type}`;
        statusMessage.innerHTML = `
          <i class="fas fa-${getMessageIcon(type)}"></i>
          <span>${message}</span>
        `;

        // Insert at the top of main content
        const mainContent = document.querySelector(".main-content");
        mainContent.insertBefore(statusMessage, mainContent.firstChild);

        // Auto-remove after 5 seconds
        setTimeout(() => {
          statusMessage.remove();
        }, 5000);
      }

      // Get message icon based on type
      function getMessageIcon(type) {
        switch (type) {
          case "success":
            return "check-circle";
          case "warning":
            return "exclamation-triangle";
          case "info":
            return "info-circle";
          default:
            return "info-circle";
        }
      }

      // Functions from other pages (for consistency)
      function showNotifications() {
        showStatusMessage("Notifications would appear here", "info");
      }

      function showProfile() {
        const userData = JSON.parse(localStorage.getItem("cacUser")) || {};
        showStatusMessage(
          `Profile: ${userData.fullName || "N/A"} (${userData.email || "N/A"})`,
          "info"
        );
      }

      // Close modal when clicking outside
      document.addEventListener("click", function (e) {
        const modal = document.getElementById("serviceModal");
        if (e.target === modal) {
          closeServiceModal();
        }
      });

      // Enter key search
      document.addEventListener("keypress", function (e) {
        if (e.key === "Enter") {
          searchCompanies();
        }
      });

      // Auto-refresh company data every 30 seconds to catch new registrations
      setInterval(() => {
        if (document.visibilityState === "visible") {
          loadAllCompanies();
        }
      }, 30000);
    </script>
  </body>
</html>
